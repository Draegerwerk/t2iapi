plugins {
    id 'java'
}

repositories {
    mavenCentral()
    flatDir {
        dirs '../../java/target/'
    }
}

def grpcVersion = '1.45.1'
def t2iVersion = System.getenv("build_version") ?: "0.0.0"
dependencies {
    testImplementation "io.grpc:grpc-protobuf:${grpcVersion}"
    testImplementation "io.grpc:grpc-stub:${grpcVersion}"
    testImplementation('org.junit.jupiter:junit-jupiter:5.5.1')
    testImplementation "io.grpc:grpc-netty-shaded:${grpcVersion}"
    testImplementation name: "t2iapi-${t2iVersion}"
}

test {
    useJUnitPlatform()
    testLogging {
        events "passed", "skipped", "failed"
    }
    reports {
        junitXml.enabled = false
        html.enabled = true
    }
}